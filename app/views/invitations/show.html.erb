<% competition = @invitation.competition %>
<% club = @invitation.club %>
<h3>
  <%= link_to competition.name, competition %>
  (<%= competition.location %>, <%= competition.dates %>)
</h3>

<h1><%= link_to club.name, club %></h1>

<p>
<% relay_count = @invitation.relays.map { |x| x.entries.count }.sum %>
<% regis_count = @invitation.registrations.map { |x| x.entries.count }.sum %>
<%= @invitation.registrations.count %> registered swimmers
for a total of 
<%= regis_count %> individual
<% if relay_count > 0 %>
events and
<%= relay_count %> relay
<% else %>
<% end %>
events.
</p>


<h3 class="edit-head">Qualifications:</h3>
<ul style="padding: 0; margin: 0; display: inline;">
<% competition.standards.each do |standard| %>
  <li style="list-style:none; display:inline; border: 1px solid blue; background: lightyellow; padding:2px 4px; margin: 4px; border-radius: 4px;">
    <%= link_to standard.qualification.name, standard.qualification %></li>
<% end %>
</ul>


<h3>Events</h3>

<table class="fact-sheet">
  <%= render competition.events %>
</table>

<br />

<h3>Entries</h3>

<%= render :partial => 'swimmers', :locals => { :club => club } %>

<% if competition.relay_events.any? %>
<br />
<hr />
<%= render :partial => 'relays', :locals => { :club => club } %>
<% end %>

<hr/>
<%= link_to 'Results', results_path(:invitation_id => @invitation) %> 
