\onecolumn
\small
\section*{Club Records: <%= @club.full_name %>.}

<% @entries.group_by { |x| x.swimmer.gender }.each do |gender, entries_gender| %>

\begin{tabular}{|c|<%= "p{2.5cm}|" * Discipline::STROKES.length %>}
\toprule
\textbf{<%= { 'f' => 'Girls', 'm' => 'Boys' }[gender] %>}
<% Discipline::STROKES.each do |stroke| %>
  & {\hfil\textbf{<%= truncate(stroke, :length => 12) %>}\hfil}
<% end %>
\\
<% entries_gender.group_by(&:distance_course_code).sort.each do |row, entries_row| %>
\midrule
<% entries = entries_row.group_by(&:stroke) %>
\textbf{<%= distance_course(row) %>}
<% Discipline::STROKES.each do |stroke| %>
& <% if entries[stroke] %>
    <% best = best_result(entries[stroke].map(&:result).compact) %>
    <% if best %>
      {\raggedleft
      <%= best %>\\
      <%= raw best.swimmer.first_last %>\\\hfill
      (<%= best.date %>)}
    <% end %>
  <% end %>
<% end %>
\\
<% end %>
\bottomrule
\end{tabular}
<% end %>


<% @entries.group_by(&:age).sort.each do |age, entries_age| %>
<% entries_age.group_by { |x| x.swimmer.gender }.each do |gender, entries_gender| %>

\begin{tabular}{|c|<%= "p{2.5cm}|" * Discipline::STROKES.length %>}
\toprule
\textbf{<%= { 'f' => 'Girls', 'm' => 'Boys' }[gender] %> (<%= age %>)}
<% Discipline::STROKES.each do |stroke| %>
  & {\hfil\textbf{<%= truncate(stroke, :length => 12) %>}\hfil}
<% end %>
\\
<% entries_gender.group_by(&:distance_course_code).sort.each do |row, entries_row| %>
\midrule
<% entries = entries_row.group_by(&:stroke) %>
\textbf{<%= distance_course(row) %>}
<% Discipline::STROKES.each do |stroke| %>
& <% if entries[stroke] %>
    <% best = best_result(entries[stroke].map(&:result).compact) %>
    <% if best %>
      {\raggedleft
      <%= best %>\\
      <%= raw best.swimmer.first_last %>\\\hfill
      (<%= best.date %>)}
    <% end %>
  <% end %>
<% end %>
\\
<% end %>
\bottomrule
\end{tabular}
<% end %>
<% end %>
